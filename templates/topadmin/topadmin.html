{% extends './base.html' %}
{% block title %}ТОПЫ{% endblock %}
{% block content %}
	<div class="row ">
		<div class="col-12">
			<div class="section-head d-flex align-items-center justify-content-center">
				<h2>TOPS</h2>
				<a href="{% url 'topedit' slug='new'  %}" class="btn-circle btn-head" target="_blanc">
					<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						 viewBox="0 0 297 297" style="enable-background:new 0 0 297 297;" xml:space="preserve">
						<g>
							<path d="M294.061,101.395c-1.851-1.849-4.359-2.887-6.976-2.887l-88.617,0.012l0.013-88.655c0-2.617-1.038-5.126-2.888-6.977
								C193.742,1.038,191.233,0,188.616,0l-80.188,0.012c-5.445,0.002-9.859,4.415-9.86,9.86l-0.016,88.662L9.926,98.548
								c-5.446,0-9.86,4.415-9.861,9.86L0.051,188.63c0,2.618,1.038,5.126,2.889,6.977c1.85,1.85,4.359,2.888,6.976,2.888l88.621-0.012
								l-0.014,88.653c0,2.617,1.04,5.126,2.889,6.977c1.851,1.85,4.36,2.89,6.977,2.888l80.187-0.016c5.445,0,9.859-4.415,9.86-9.86
								l0.014-88.658l88.629-0.016c5.445,0,9.859-4.415,9.86-9.86l0.012-80.22C296.949,105.754,295.911,103.246,294.061,101.395z"/>
						</g>
					</svg>
				</a>
			</div>
		</div>
		{% for top in tops %}
		<div class="col-12 col-md-6 col-lg-4">
			<div class="box top">
				<div class="top-head box-item d-flex align-items-center">
					<h3>{{top.name}}</h3>
					<a class="top-url-eye btn-circle" href="{% url 'topshow' slug=top.slug %}?{{params}}" target="_blanc">
						<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve">
								<g>
									<path d="M609.608,315.426c3.19-5.874,3.19-12.979,0-18.853c-58.464-107.643-172.5-180.72-303.607-180.72
									S60.857,188.931,2.393,296.573c-3.19,5.874-3.19,12.979,0,18.853C60.858,423.069,174.892,496.147,306,496.147
									S551.143,423.069,609.608,315.426z M306,451.855c-80.554,0-145.855-65.302-145.855-145.855S225.446,160.144,306,160.144
									S451.856,225.446,451.856,306S386.554,451.855,306,451.855z" />
									<path d="M306,231.67c-6.136,0-12.095,0.749-17.798,2.15c5.841,6.76,9.383,15.563,9.383,25.198c0,21.3-17.267,38.568-38.568,38.568
									c-9.635,0-18.438-3.541-25.198-9.383c-1.401,5.703-2.15,11.662-2.15,17.798c0,41.052,33.279,74.33,74.33,74.33
									s74.33-33.279,74.33-74.33S347.052,231.67,306,231.67z" />
								</g>
						</svg>
					</a>
				</div>
				
				<ul class="top-casino-ul box-item-gradient">
					{% for item in top.tpc_nametop.all|dictsort:'position' %}
					<li>{{item.casino.name}}</li>
					{% endfor %}
				</ul>
				<div class="top-infobox box-item">
					<p class="top-info"><span>Страна:</span> {{top.country}}</p>
					<p class="top-info"><span>Дизайн:</span> {{top.design}}</p>
					<p class="top-info">
						<span>Почты</span> {{top.mails.count}}
					</p>
					<!-- <p class="top-info">last edit: {{top.date_modified|date:"H:i:s d.m.Y" }}</p> -->
					<div class="top-url">
						<p class="top-info d-flex">
							<span>Link: </span>
							<textarea class="top-url-input" readonly></textarea>
							<a href="{% url 'topshow' slug=top.slug %}?{{params}}"></a>
							<button class="top-url-copy btn-circle">
								<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
								 viewBox="0 0 488.3 488.3" style="enable-background:new 0 0 488.3 488.3;" xml:space="preserve">
								 <g>
								 	<path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124
								 		C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124
								 		c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/>
								 	<path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227
								 		c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6
								 		V38.6C439.65,17.3,422.35,0,401.05,0z"/>
								 </g>
								</svg>
							</button>
						</p>
					</div>
				</div>
				<div class="historia">
					<div class="d-flex">
						<h4 class="">Последние изменения:</h4>

					</div>
					
					<p>{{top.date_modified1|date:"j.m.y - G:i"}} — {{top.thing_modified1}}</p>
					<p>{{top.date_modified2|date:"j.m.y - G:i"}} — {{top.thing_modified2}}</p>
					<p>{{top.date_modified3|date:"j.m.y - G:i"}} — {{top.thing_modified3}}</p>
					<p>{{top.date_modified4|date:"j.m.y - G:i"}} — {{top.thing_modified4}}</p>
					<p>{{top.date_modified5|date:"j.m.y - G:i"}} — {{top.thing_modified5}}</p>
				</div>
				<div class="btn-box">
					<form method="POST">
						{% csrf_token %}
						<input type="text" name="slug" value="{{top.slug}}" readonly hidden>
						<input class="btn" type="submit" value="Клонировать">
					</form>
					<a class="btn" href="{% url 'topedit' slug=top.slug %}"> Изменить </a>
					<a class="btn-circle btn-delete" href="#delete-{{top.id}}" data-bs-target="#delete-{{top.id}}" data-bs-toggle="modal">
						<svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
						  <path  d="M20 2h-4v-.85C16 .52 15.48 0 14.85 0h-5.7C8.52 0 8 .52 8 1.15V2H4c-1.1 0-2 .9-2 2 0 .74.4 1.38 1 1.73v14.02C3 22.09 4.91 24 7.25 24h9.5c2.34 0 4.25-1.91 4.25-4.25V5.73c.6-.35 1-.99 1-1.73 0-1.1-.9-2-2-2zm-1 17.75c0 1.24-1.01 2.25-2.25 2.25h-9.5C6.01 22 5 20.99 5 19.75V6h14v13.75z"/>
						  <path  d="M8 20.022c-.553 0-1-.447-1-1v-10c0-.553.447-1 1-1s1 .447 1 1v10c0 .553-.447 1-1 1zm8 0c-.553 0-1-.447-1-1v-10c0-.553.447-1 1-1s1 .447 1 1v10c0 .553-.447 1-1 1zm-4 0c-.553 0-1-.447-1-1v-10c0-.553.447-1 1-1s1 .447 1 1v10c0 .553-.447 1-1 1z"/>
						</svg>
					</a>
				</div>
				
			</div>
		</div>
		<div class="modal fade" id="delete-{{top.id}}" style="display: none;" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content position-relative">
					<button type="button" class="close modal-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
					<div class="modal-wrapper">
						<p>Точно удалить топ {{top.name}}?</p>
						<div class="btn-box">
							<a class="btn" href="{% url 'topdelete' slug=top.slug %}">Удалить</a>
							<button type="button" class="close btn" data-bs-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">Отмена</span>
							</button>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>

{% endblock %}
	